<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Timetable - Planung</title>
	<h:outputStylesheet name="style.css" library="css" />
</h:head>

<h:body>
	<h:form id="planningForm">
		<p:menubar>
			<f:facet name="options">
				<p:commandButton value="Systemeinrichtung" icon="ui-icon-gear"
					process="@this" action="/setupTimetable/index" />
			</f:facet>
		</p:menubar>
		<p:spacer style="height:20px" />
		<p:tabView>
			<p:tab title="Lehrer" id="planningTeacherTab">
			    <p:outputLabel for="teacherSearchInput" value="Suche" />
				<p:inputText id="teacherSearchInput" value="#{planningController.searchTerm}">
					<p:ajax event="keyup" update="teacherSearchTable" />
				</p:inputText>
				<p:outputPanel rendered="#{planningController.existTeachers}">
					<p:dataTable id="teacherSearchTable"
						selection="#{planningController.teacher}" selectionMode="single"
						value="#{planningController.teachersForSearchTerm}"
						scrollable="false" scrollRows="5" var="teacher"
						rowKey="#{teacher.symbol}" style="margin-top:10px;"
						emptyMessage="Keine Lehrkräfte mit dem entsprechenden Kürzel">
						<p:ajax event="rowSelect" update="@form" process="@this" listener="#{planningController.setTeacherActivityModel}" />
						<p:ajax event="rowUnselect" update="@form" process="@this" />
						<p:column headerText="Name">
							<h:outputText value="#{teacher.name}" />
						</p:column>
						<p:column headerText="Kürzel">
							<h:outputText value="#{teacher.symbol}" />
						</p:column>
					</p:dataTable>
				</p:outputPanel>
				<p:outputPanel rendered="#{not planningController.existTeachers}">
					<h:outputText value="Dem System sind keine Lehrkräfte bekannt. " />
					<h:outputText value="Neue Lehrkräfte können in den " />
					<p:commandLink action="setupTimetable/manageTeachers"
						value="Systemeinstellungen" process="@this" />
					<h:outputText value=" festgelegt werden." />
				</p:outputPanel>

			</p:tab>

			<p:tab title="Klassen">

			</p:tab>
		</p:tabView>
		<p:outputPanel id="scheduleMainPanel"
			rendered="#{planningController.hasChosen}">
			<p:outputPanel>
				<p:spacer style="height:60px" />
				<p:outputPanel style="float:right; padding:10px">
					<p:commandButton value="Hinzufügen" />
				</p:outputPanel>
			</p:outputPanel>
			<!-- Schedule -->
			<p:schedule showHeader="false" view="agendaWeek" allDaySlot="false"
				axisFormat="HH:mm" value="#{planningController.scheduleModel}" slotMinutes="#{planningController.slotMinutes}"
				columnFormat="week: 'ddd'" locale="de" ignoreTimezone="true"
				initialDate="#{planningController.initalDate}" />
			<p:spacer style="height:50px;" />
		</p:outputPanel>
	</h:form>

	<!-- Schedule locales -->
	<script type="text/javascript">
		PrimeFaces.locales['de'] = {
			dayNames : [ 'Sonntag', 'Montag', 'Dienstag', 'Mittwoch',
					'Donnerstag', 'Freitag', 'Samstag' ],
			dayNamesShort : [ 'Son', 'Mon', 'Die', 'Mit', 'Don', 'Fre', 'Sam' ],
			dayNamesMin : [ 'So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa' ],
			weekHeader : 'Hf',
			firstDay : 1,
			week : 'Woche',
			day : 'Tag',
		};
	</script>

</h:body>
</html>