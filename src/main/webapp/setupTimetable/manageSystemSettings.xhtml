<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>

</h:head>

<h:body>
	<ui:composition template="index.xhtml">

		<ui:define name="setupContent">
			<p:outputPanel>
				<p:outputPanel>
					<h1>
						<h:outputText value="Systemeinstellungen" />
					</h1>
					<h:outputText
						value="In dieser Ansicht können die globalen Systemeinstellungen geändert werden." />
				</p:outputPanel>

				<p:separator style="margin-top:10px;" />


				<p:panel header="Planungsperiode">
					<p:outputPanel>
						<h:outputText
							value="Wenn Sie wünschen, 
						können Sie alle Aktivitäten löschen, um eine komplett neue Planung zu beginnen. 
						Sie können jederzeit zum vorherigen Status zurückkehren, 
						indem Sie ein entsprechendes Backup wiederherstellen. 
						Sollten Sie versehentlich auf den Button geklickt haben, 
						können Sie dies durch einen Klick auf den Rückgängig-Button rückgängig machen." />
					</p:outputPanel>
					<p:spacer height="20" />
					<p:outputPanel>
						<p:commandButton value="Alle Aktivitäten löschen"
							actionListener="#{configController.deleteAllActivities}"
							update="commandGrowl">
						</p:commandButton>
					</p:outputPanel>
				</p:panel>

				<p:spacer height="40" />

				<p:panel id="generalSettings" header="Allgemeine Einstellungen">

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="weekDaySelection"
							value="Zu verplanende Wochentage" />
						<p:outputPanel>
							<p:selectCheckboxMenu id="weekDaySelection"
								value="#{configController.selectedWeekdays}"
								converter="WeekdayNameConverter" filter="false">
								<f:selectItems value="#{configController.weekdays}" />
							</p:selectCheckboxMenu>
						</p:outputPanel>
					</h:panelGrid>

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel value="Start- und Endzeit eines Wochentags"
							for="weekdayStartTime"></p:outputLabel>
						<h:panelGrid columns="3">
							<p:calendar id="weekdayStartTime" binding="#{startTime}"
								value="#{configController.weekdayStartTime}" size="5"
								pattern="HH:mm" locale="de" timeOnly="true" required="true"
								requiredMessage="Angabe der Startzeit wird benötigt.">
							</p:calendar>
							<h:outputText value=" bis " />
							<p:calendar id="weekdayEndTime"
								value="#{configController.weekdayEndTime}" size="5"
								pattern="HH:mm" locale="de" timeOnly="true" required="true"
								requiredMessage="Angabe der Endzeit wird benötigt.">
								<f:attribute name="startTime"
									value="#{startTime}" />
								<f:validator validatorId="org.woym.TimeRangeValidator" />
							</p:calendar>
						</h:panelGrid>
					</h:panelGrid>

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="timetableGrid"
							value="Zeitraster des Stundenplans:" />
						<p:outputPanel>
							<p:spinner id="timetableGrid"
								value="#{configController.timetableGrid}" required="true"
								requiredMessage="Angabe des Zeitrasters wird benötigt."
								max="#{configController.maxSpinnerValue}"
								min="#{configController.minSpinnerValue}">
								<p:ajax event="keyup" update="timetableGrid" />
							</p:spinner>
							<h:outputText value=" Minuten" />
						</p:outputPanel>
					</h:panelGrid>

					<p:separator style="margin-top:20px;margin-bottom:20px" />

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="teacherSettlement"
							value="Zeitliche Abrechnung einer Lehrkraft" />
						<p:outputPanel>
							<h:outputText value="1 Wochenstunde à " />
							<p:spinner id="teacherSettlement"
								value="#{configController.teacherSettlement}" required="true"
								requiredMessage="Angabe der Zeitabrechnung einer Lehrkraft wird benötigt."
								max="#{configController.maxSpinnerValue}"
								min="#{configController.minSpinnerValue}">
								<p:ajax event="keyup" update="teacherSettlement" />
							</p:spinner>
							<h:outputText value=" Minuten" />
						</p:outputPanel>
					</h:panelGrid>

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="paSettlement"
							value="Zeitliche Abrechnung eines päd. Mitarbeiters" />
						<p:outputPanel>
							<h:outputText value="1 Wochenstunde à " />
							<p:spinner id="paSettlement"
								value="#{configController.paSettlement}" required="true"
								requiredMessage="Angabe der Zeitabrechnung eines päd. Mitarbeiters wird benötigt."
								max="#{configController.maxSpinnerValue}"
								min="#{configController.minSpinnerValue}">
								<p:ajax event="keyup" update="paSettlement" />
							</p:spinner>
							<h:outputText value=" Minuten" />
						</p:outputPanel>
					</h:panelGrid>

					<p:separator style="margin-top:20px;margin-bottom:20px" />

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="schoolclassIdentifiers"
							value="Art der Bezeichner für Schulklassen" />
						<p:selectOneRadio id="schoolclassIdentifiers"
							value="#{configController.identifierCase}" layout="grid"
							columns="1" required="true"
							requiredMessage="Angabe eines Schulklassenbezeichners wird benötigt.">
							<f:selectItem itemLabel="Kleinbuchstaben"
								itemValue="#{configController.lowerCase}" />
							<f:selectItem itemLabel="Großbuchstaben"
								itemValue="#{configController.upperCase}" />
							<f:selectItem itemLabel="Beides"
								itemValue="#{configController.bothCases}" />
						</p:selectOneRadio>
					</h:panelGrid>

					<p:separator style="margin-top:20px;margin-bottom:20px" />

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="typicalActivityDuration"
							value="Typische Dauer einer Aktivität (eines Unterrichtsfaches)" />
						<p:outputPanel>
							<p:spinner id="typicalActivityDuration" required="true"
								requiredMessage="Angabe der typischen Dauer einer Aktivität wird benötigt."
								value="#{configController.typicalActivityDuration}"
								max="#{configController.maxSpinnerValue}"
								min="#{configController.minSpinnerValue}">
								<p:ajax event="keyup" update="typicalActivityDuration" />
							</p:spinner>
							<h:outputText value=" Minuten" />
						</p:outputPanel>
					</h:panelGrid>

					<p:separator style="margin-top:20px;margin-bottom:20px" />

					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<h:outputText
							value="Dialoge zurücksetzen, so dass erneut alle Dialoge angezeigt werden" />
						<p:commandButton value="Zurücksetzen"
							icon="ui-icon-arrowreturnthick-1-w"
							actionListener="#{configController.resetDialogs}"
							update="commandGrowl">
						</p:commandButton>
					</h:panelGrid>
				</p:panel>

				<p:spacer height="40" />

				<p:panel id="backupSettings" header="Backup-Einstellungen">
					<h:outputText
						value="Intervall in Minuten, in dem die Datensicherung erfolgen soll." />
					<h:panelGrid columns="2" style="width:100%;"
						columnClasses="half-column">
						<p:outputLabel for="backupInterval" value="Intervall" />
						<p:spinner id="backupInterval"
							value="#{configController.backupInterval}"
							max="#{configController.maxBackupInterval}"
							min="#{configController.minBackupInterval}" />
					</h:panelGrid>
				</p:panel>

				<p:outputPanel style="height:60px; float:right; margin-top:10px;">
					<p:commandButton value="Übernehmen" icon="ui-icon-plusthick"
						onclick="PF('wConfimSettings').show();"
						process="generalSettings,backupSettings,@this">
					</p:commandButton>
				</p:outputPanel>
			</p:outputPanel>

			<!-- Confirm-Dialog -->
			<p:dialog header="Bestätigen" modal="true" draggable="true"
				resizable="false" appendToBody="true" dynamic="true"
				id="confimSettings" widgetVar="wConfimSettings" showEffect="fade"
				hideEffect="fade">
				<h:panelGrid columns="1">
					<h:outputText
						value="Sind Sie sicher, dass die Einstellungen übernommen werden soll?" />
					<p:separator />
					<p:outputPanel>
						<p:commandButton value="Bestätigen"
							actionListener="#{configController.updateProperties}"
							oncomplete="PF('wConfimSettings').hide();" update="commandGrowl"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
						<p:commandButton value="Abbrechen"
							oncomplete="PF('wConfimSettings').hide();"
							styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
					</p:outputPanel>
					<p:outputPanel>
						<h:outputText value="Sie können die Aktion " />
						<b><h:outputText value="nicht via Rückgängig-Button " /></b>
						<h:outputText value="nachträglich rückgängig machen." />
					</p:outputPanel>
				</h:panelGrid>
			</p:dialog>


		</ui:define>
	</ui:composition>
</h:body>
</html>